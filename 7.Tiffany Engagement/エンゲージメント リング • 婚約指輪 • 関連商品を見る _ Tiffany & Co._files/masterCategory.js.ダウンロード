var lastId,scrollItems,viewportHeight;$(document).ready(function(){layoutTiles();$("#maincontent > .tile-container").show();viewportHeight=$(window).height();if($(".landing-sticky-nav").length){scrollItems=$(".landing-sticky-nav a").map(function(){var item=$($(this).attr("href"));if(item.length){return item;}});positionDots();}$("body").on("click",".show-nav",function(){$(".engagement-sticky-nav").removeClass("collapsed");$(".engagement-sticky-nav").addClass("expanded-lock");var barHeight=$(".engagement-sticky-nav").outerHeight()-10;if($(".engagement-sticky-nav").hasClass("fixed")){$("#maincontent").css("padding-top",barHeight);}fixBar();return false;});$("body").on("click",".hide-nav",function(){$(".engagement-sticky-nav").addClass("collapsed");$(".engagement-sticky-nav").removeClass("expanded-lock");var barHeight=$(".engagement-sticky-nav").outerHeight()-10;if($(".engagement-sticky-nav").hasClass("fixed")){$("#maincontent").css("padding-top",barHeight);}fixBar();return false;});$("body").on("click",".scroll-down",function(){$('html, body').animate({scrollTop:$(".first-static").offset().top+$(".first-static").outerHeight()-$(".engagement-sticky-nav").outerHeight()-10});return false;});$("body").on("click",".landing-sticky-nav a",function(e){var href=$(this).attr("href");var offset;if($(window).width()<768){offset=$(href).offset().top-$("header").outerHeight()+1;}else{offset=$(href).offset().top-$(".engagement-sticky-nav").outerHeight()+1;}$("#stickyDots a").removeClass("selected");$(this).addClass("selected");$('html, body').stop().animate({scrollTop:offset},300);return false;});if(typeof isPageNotFound!="undefined"&&isPageNotFound.toLowerCase()=="true"){openPageNotFound();}});$(window).load(function(){if($(".landing-sticky-nav").length){positionDownArrow();fixBar();}});$(window).resize(function(){layoutTiles();if($(".landing-sticky-nav").length){fixBar();positionDownArrow();positionDots();}});$(window).scroll(function(){if($(".landing-sticky-nav").length){fixBar();positionDownArrow();positionDots();}});function fixBar(){var viewportScrollTop=$(window).scrollTop();var barOffset;var barHeight;if($(".engagement-info-nav").is(":visible")){barOffset=$("#header").offset().top+$("#header").outerHeight()-10;barHeight=$(".engagement-sticky-nav").outerHeight()-10;if(viewportScrollTop>=barOffset){$(".engagement-sticky-nav").addClass("fixed");if(!$(".engagement-sticky-nav").hasClass("expanded-lock")){$(".engagement-sticky-nav").addClass("collapsed");}$(".engagement-sticky-nav").css("margin-top","0");}else{$(".engagement-sticky-nav").removeClass("fixed").removeClass("expanded-lock");$(".engagement-sticky-nav").css("margin-top",barHeight* -1);}$("#maincontent").css("padding-top",barHeight);}}function positionDots(){var rightEdge=$(window).width()-$("#wrapper").offset().left-$("#wrapper").outerWidth();$(".landing-sticky-nav").css("right",rightEdge);var viewportScrollTop=$(window).scrollTop();var offset;if($(window).width()<768){offset=$("header").outerHeight();}else{offset=$(".engagement-sticky-nav").outerHeight()-10;}var cur=scrollItems.map(function(){if($(this).offset().top<viewportScrollTop+offset+25){return this;}});cur=cur[cur.length-1];var id=cur&&cur.length?cur[0].id:"";if(lastId!==id){lastId=id;$(".landing-sticky-nav a").removeClass("active");$(".landing-sticky-nav a").filter("[href=#"+id+"]").addClass("active");}}function positionDownArrow(){var viewportScrollTop=$(window).scrollTop();var viewportScrollBottom=viewportScrollTop+viewportHeight;var heroBottom=$("#tile3").offset().top+$("#tile3").outerHeight();var pBottom=$("#tile3 > div").offset().top+$("#tile3 > div").outerHeight();var linkTop=pBottom-$("#tile3").offset().top;var linkHeight=$(".scroll-down").outerHeight();if(heroBottom<viewportScrollBottom){$(".scroll-down").removeClass("fixed");$(".scroll-down").addClass("absolute");$(".scroll-down").css("top","auto");}else{if(viewportScrollBottom<pBottom+linkHeight+25){$(".scroll-down").removeClass("absolute");$(".scroll-down").removeClass("fixed");$(".scroll-down").css("top",linkTop);}else{$(".scroll-down").removeClass("absolute");$(".scroll-down").addClass("fixed");$(".scroll-down").css("top","auto");}}}